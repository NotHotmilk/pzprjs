/*! @license pzpr.js v1375cc80 (c) 2009-2025 sabo2, MIT license
 *   https://github.com/sabo2/pzprv3 */
!function(e,i){"object"==typeof module&&module.exports?module.exports=[e,i]:pzpr.classmgr.makeCustom(e,i)}(["heyajilimisaki"],{MouseEvent:{RBShadeCell:!0,use:!0,inputModes:{edit:["border","clear","info-line"],play:["line","peke","shade","unshade","info-line"]},mouseinput_auto:function(){this.puzzle.playmode||this.puzzle.editmode&&(this.mousestart||this.mousemove?this.isBorderMode()?this.inputborder():this.inputdirec():this.mouseend&&this.notInputted()&&this.inputqnum_heyajilimisaki())},inputdirec:function(){var e,i,t=this.getpos(0);this.prevPos.equals(t)||((e=this.prevPos.getc()).isnull||-1===e.qnum&&-1===e.qnum2||(-1!==e.qnum2&&(-2===e.qnum2?e.setQnum(0):e.setQnum(e.qnum2),e.setQnum2(-1)),(i=this.prevPos.getdir(t,2))!==e.NDIR&&(e.setQdir(e.qdir!==i?i:0),0===e.qdir&&(0===e.qnum?e.setQnum2(-2):e.setQnum2(e.qnum),e.setQnum(-1)),e.draw())),this.prevPos=t)},inputqnum_heyajilimisaki:function(){var e=this.getcell();e.isnull||e===this.mouseCell||(e!==this.cursor.getc()?this.setcursor(e):this.inputnumber_heyajilimisaki(e),this.mouseCell=e)},inputnumber_heyajilimisaki:function(e){console.log(e.qnum,e.qnum2,e.qnum3," -> ");var i,t=e.getmaxnum(),s=-1,r=this.isBorderMode()?3:(-1===e.qnum&&-1===e.qnum2&&(r=2),-1!==e.qnum?1:2);switch(r){case 1:i=e.qnum;break;case 2:i=e.qnum2;break;case 3:i=e.qnum3;break;default:i=-1}switch(2===r?"left"===this.btn?s=i===t?-1:-1===i?-2:-2===i?1:i+1:"right"===this.btn&&(s=-1===i?t:-2===i?-1:1===i?-2:i-1):"left"===this.btn?s=i===t?-1:-2===i?0:i+1:"right"===this.btn&&(s=-1===i||-2===i?t:i-1),r){case 1:e.setQnum(s);break;case 2:e.setQnum2(s);break;case 3:e.setdata("qnum3",s);break;default:i=-1}console.log(e.qnum,e.qnum2,e.qnum3),e.draw()}},KeyEvent:{enablemake:!0,moveTarget:function(e){return!e.match(/shift/)&&this.moveTCell(e)},keyinput:function(e){this.key_inputdirec(e)||this.key_inputqnum(e)}},Cell:{minnum:0,maxnum:function(){return this.room.clist.length}},Border:{enableLineNG:!0},Board:{hasborder:1},AreaRoomGraph:{enabled:!0,hastop:!0},LineGraph:{enabled:!0},Graphic:{hideHatena:!0,qcmpcolor:"rgb(127,127,127)",irowake:!0,getQuesNumberColor:function(e){var i=this.getQuesNumberColor_mixed(e);return e.error||e.qinfo,i},drawQuesNumbers2:function(){this.drawCircles(),this.vinc("cell_number_2","auto"),this.drawNumbers_com(this.getQuesNumberText2,this.getQuesNumberColor,"cell_text_2_",{ratio:.65})},getQuesNumberText2:function(e){return this.getNumberText(e,(this.puzzle.execConfig("dispmove")?e.base:e).qnum2)},getCircleFillColor_qnum:function(e){return-1!==e.qnum2?1===(e=e.error||e.qinfo)||4===e?this.errbcolor1:this.circlebasecolor:null},getCircleStrokeColor_qnum:function(e){var i=this.puzzle,t=e.error||e.qinfo,s=i.execConfig("dispmove");return-1!==(s?e.base:e).qnum2?s&&i.mouse.mouseCell===e?this.movecolor:1===t||4===t?this.errcolor1:this.quescolor:null},drawFillingNumBase:function(){for(var e=this.vinc("cell_filling_back","crispEdges",!0),i=(this.puzzle.execConfig("dispmove"),this.range.cells),t=0;t<i.length;t++){var s,r=i[t],n="rgba(237,237,237,0.5)";e.vid="c_full_nb_"+r.id,-1===r.qnum3||-1===r.qnum&&-1===r.qnum2?e.vhide():(s=(r.bx-.9)*this.bw-.5,r=(r.by-.9)*this.bh-.5,e.fillStyle=n,e.fillRect(s,r,.8*this.bw,.8*this.bh))}},drawFillingNumbers:function(){for(var e=this.vinc("cell_filling_number","auto"),i=(this.puzzle.execConfig("dispmove"),this.range.cells),t=0;t<i.length;t++){var s,r=i[t],n=r.qnum3,u=r.bx*this.bw,o=r.by*this.bh;e.vid="cell_fill_text_"+r.id,-1!==n?(n=0<n?""+n:"?",s={position:this.TOPLEFT},-1!==r.qnum||-1!==r.qnum2?(s.ratio=.4,s.width=[.5,.33]):(s.hoffset=.8,s.voffset=.75,s.ratio=.5),e.fillStyle=this.getQuesNumberColor(r),this.disptext(n,u,o,s)):e.vhide()}},paint:function(){this.drawBGCells(),this.drawShadedCells(),this.drawDotCells(),this.drawGrid(),this.drawBorders(),this.drawLines(),this.drawArrowNumbers(),this.drawQuesNumbers2(),this.drawFillingNumBase(),this.drawFillingNumbers(),this.drawPekes(),this.drawChassis(),this.drawBoxBorders(!1),this.drawTarget()}},Encode:{},FileIO:{},AnsCheck:{}});